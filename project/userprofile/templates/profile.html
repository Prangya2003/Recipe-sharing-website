{% extends "base.html" %}

{% block title %}{{ user.username }}'s Profile{% endblock %}

{% block body %}
{% include "navbar.html" %}
{% load static %} 

<style>
    body {
        background-color: #e9ecef; /* Soft light background color */
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
    }

    .profile-page {
        margin-top: 80px; /* Space from navbar */
        padding: 40px;
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
        background-color: #ffffff; /* White background for the profile page */
        border-radius: 8px;
        box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }

    .profile-header {
        text-align: center;
        margin-bottom: 30px;
    }

    .profile-pic {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        border: 5px solid #007bff;
        margin-bottom: 20px;
    }

    h1 {
        font-size: 2.5rem;
        color: #343a40;
    }

    .profile-info {
        text-align: center;
        margin-bottom: 30px;
        font-size: 1.1rem;
        color: #495057;
    }

    .profile-info strong {
        color: #007bff;
    }

    .profile-content {
        display: flex;
        flex-direction: column;
        gap: 20px; /* Space between sections */
    }

    .profile-content > div {
        margin-bottom: 20px;
    }

    .btn {
        font-size: 0.875rem;
        padding: 10px 20px;
        border-radius: 25px;
        text-transform: uppercase;
        transition: background-color 0.3s, transform 0.2s;
        display: inline-block;
        text-align: center;
        color: #fff;
        text-decoration: none;
        border: none;
    }

    .btn-primary {
        background-color: #007bff;
    }

    .btn-primary:hover {
        background-color: #0056b3;
        transform: scale(1.05);
    }

    .btn-secondary {
        background-color: #28a745;
    }

    .btn-secondary:hover {
        background-color: #218838;
        transform: scale(1.05);
    }

    .recipe-item {
        padding: 15px;
        background-color: #ffffff;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .recipe-id {
        font-size: 0.875rem;
        color: #868e96;
    }
</style>

<div class="profile-page">
    <div class="profile-header">
        {% if data.user_profile.profile_picture %}
            <img src="{{ data.user_profile.profile_picture.url }}" alt="Profile Picture" class="profile-pic">
        {% else %}
            <img src="/media/default-profile.jpeg" alt="Default Profile Picture" class="profile-pic">
        {% endif %}
        <h1>{{ user.username }}'s Profile</h1>
    </div>

    <div class="profile-info">
        <p>Is this your profile? <strong>{{ data.is_user_profile }}</strong></p>
        <p>Total Recipes: <strong>{{ data.recipes_count }}</strong></p>
    </div>

    {% if data.is_user_profile %}
        <div class="profile-content">
            <div>
                <h2>My Recipes</h2>
                {% for recipe in data.user_recipes %}
                    <div class="recipe-item">
                        <h3>{{ recipe.recipe_name }}</h3>
                        <p class="recipe-id">Recipe ID: {{ recipe.id }}</p>
                        <a href="{% url 'recipe_detail' recipe.id %}" class="btn btn-secondary">View Recipe</a>
                    </div>
                {% endfor %}
            </div>

            <div>
                <h2>Add Recipe</h2>
                <a href="{% url 'create_recipe_view' %}" class="btn btn-primary">Add Recipe</a>
            </div>

            <div>
                <h2>Profile Actions</h2>
                <a href="{% url 'update_user_profile' %}" class="btn btn-primary">Update Profile</a>
                <a href="{% url 'update_password_view' %}" class="btn btn-primary">Update Password</a>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}
